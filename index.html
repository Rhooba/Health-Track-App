<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Tracker App</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="script.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>

<body>
  <h1>Food Tracker</h1>

  <!-- Entry Form -->
  <div id="entryForm">
    <input type="text" id="foodInput" placeholder="What did you eat?" />
    <input type="date" id="dateInput" placeholder="Select date" value="2024-03-16" />
    <input type="text" id="bpsInput" placeholder="Blood Pressure (e.g. 120)" />
    
    <select id="mealTypeInput">
      <option value="" disabled selected>Choose a Meal Type</option>
      <option value="Breakfast">Breakfast</option>
      <option value="Lunch">Lunch</option>
      <option value="Dinner">Dinner</option>
      <option value="Snacks">Snack</option>
      <option value="Dessert">Dessert</option>
    </select>

    <input type="number" id="caloriesInput" placeholder="Calories (e.g. 300)" min="0" />

    <button id="addLogButton">Add Entry</button>

    <label class="sick-label">
      <input type="checkbox" id="sickInput" class="sick-checkbox"/>
      <span class="sick-label-text">Made me feel sick</span>
    </label>

    <button id="clearAllButton">Clear All Entries</button>
    <button id="exportEncryptedButton">📊 Export for Health Provider</button>

    <div class="bs-label-wrapper">
      <label class="bs-label">BS (1-7):</label>
      <select id="bsInput" class="bs-dropdown">
      <option value="">--</option>
      <option value="1">1 (Very Low)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4 (Neutral)</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7 (Very High)</option>
      </select>
    </div>
  </div>

  <!-- Food Log -->
  <ul id="foodLogList"></ul>

  <!-- Filters -->
  <div id="filters">
    <button id="filterAllButton">Show All 👩🏻‍🍳</button>
    <button id="filterSickButton">Only Sick 🤮</button>
    <button id="filterOkayButton">Only Okay 🤩</button>
  </div>

  <!-- Favorite Foods Section -->
  <h2>Save All of Your Favorite Foods</h2>
  <button class="collapsible active">± Favorite Foods 🌟</button>
  <div class="content" style="display: block;">
    <ul id="favoritesList"></ul>
  </div>

  <!-- Graphs Section -->
  <h2>Summary Graphs for Food and BP</h2>
  
  <!-- BP Line Chart Section -->
  <button class="collapsible">± Blood Pressure Trend</button>
  <div class="content graph-content">
    <canvas id="bpLineChart" width="400" height="200"></canvas>
  </div>

  <!-- Daily Food Combination Chart -->
  <div class="chart-section">
    <button class="collapsible">📊 Daily Food Combinations</button>
    <div class="content">
      <p>Track your W/S/P food combinations throughout the day. Red bars indicate unsafe S+P combinations.</p>
      <canvas id="dailyCombinationChart" width="400" height="200"></canvas>
    </div>
  </div>

  <!-- AI Health Insights -->
  <div class="chart-section">
    <button class="collapsible">🤖 AI Health Insights</button>
    <div class="content">
      <div id="aiSuggestions"></div>
    </div>
  </div>
</div>
</body>

<!-- Welcome Greeting Popup -->
<div id="bpReminderPopup" class="popup-overlay">
  <div class="popup-content">
    <div class="popup-header">
      <h3>👋 Welcome to Food Tracker!</h3>
      <button id="closeBpPopup" class="close-btn">&times;</button>
    </div>
    <div class="popup-body">
      <p>🍎 <strong>Track your food and health patterns easily!</strong></p>
      <p>• Add foods you eat and how they make you feel</p>
      <p>• Record your blood pressure for health trends</p>
      <p>• Get AI insights about your eating patterns</p>
      <br>
      <p>💻 <strong>Built with ❤️ for Mom</strong></p>
      <p><a href="https://github.com/Rhooba/food-tracker-app" target="_blank" style="color: var(--tropic-blue); text-decoration: underline;">Further instructions and other projects see my GitHub →</a></p>
    </div>
    <div class="popup-actions">
      <button id="addBpNow" class="popup-btn primary">Get Started!</button>
      <button id="skipToday" class="popup-btn secondary">Skip Today</button>
    </div>
  </div>
</div>

<!-- BP Reminder Popup -->
<div id="bpReminderOnlyPopup" class="popup-overlay">
  <div class="popup-content">
    <div class="popup-header">
      <h3>🩺 Blood Pressure Reminder</h3>
      <button id="closeBpReminderOnly" class="close-btn">&times;</button>
    </div>
    <div class="popup-body">
      <p>📊 <strong>You have not entered your Blood Pressure for today.</strong></p>
      <p>You've made several entries, but haven't recorded it.</p>
      <p>💡 <strong>Please enter your BP on your next entry</strong> to track your health trends!</p>
    </div>
    <div class="popup-actions">
      <button id="addBpNowReminder" class="popup-btn primary">Got it!</button>
      <button id="skipBpToday" class="popup-btn secondary">Skip Today</button>
    </div>
  </div>
</div>

</html>